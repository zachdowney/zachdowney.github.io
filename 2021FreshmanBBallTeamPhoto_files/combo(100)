YUI.add("hermes-template-photo-list-album",function(e,l){var a=e.Template.Handlebars.revive({1:function(e,l,a,n,t){return"interaction-view"},3:function(e,l,a,n,t){return"click-target"},compiler:[8,">= 4.3.0"],main:function(e,l,a,n,t){var r,i,o=null!=l?l:e.nullContext||{},u=e.hooks.helperMissing,s=e.escapeExpression,m=e.lookupProperty||function(e,l){if(Object.prototype.hasOwnProperty.call(e,l))return e[l]};return'<a class="'+(null!=(r=m(a,"if").call(o,null!=l?m(l,"hasInteraction"):l,{name:"if",hash:{},fn:e.program(1,t,0),inverse:e.program(3,t,0),data:t,loc:{start:{line:1,column:10},end:{line:1,column:75}}}))?r:"")+' avatar photo-list-album album ginormous" href="'+s("function"==typeof(i=null!=(i=m(a,"albumPageUrl")||(null!=l?m(l,"albumPageUrl"):l))?i:u)?i.call(o,{name:"albumPageUrl",hash:{},data:t,loc:{start:{line:1,column:123},end:{line:1,column:139}}}):i)+'" title="'+s("function"==typeof(i=null!=(i=m(a,"albumTitle")||(null!=l?m(l,"albumTitle"):l))?i:u)?i.call(o,{name:"albumTitle",hash:{},data:t,loc:{start:{line:1,column:148},end:{line:1,column:162}}}):i)+'"></a>\n'},useData:!0}),n={};e.Array.each([],function(l){var a=e.Template.get("hermes/"+l);a&&(n[l]=a)}),e.Template.register("hermes/photo-list-album",function(l,t){return t=t||{},t.partials=t.partials?e.merge(n,t.partials):n,a(l,t)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("photo-list-album-view",function(e){var t=require("hermes-core/type-validator");e.namespace("Views")[this.name]=e.Base.create(this.name,e.FlickrView,[],{initializer:function(e){return""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),this},loadState:function(){return e.Promise.resolve()},buildContainer:function(){var e=this.get("container");return this.updateGeometry(),this.setContainerWithTemplate("photo-list-album",{albumPageUrl:this.get("model").getValue("url"),hasInteraction:!!this.get("interactionViewName")&&!this.appContext.forceServerRender,albumTitle:this.get("model").getValue("title")}),YUI.Env.isServer?(e.setStyles({"background-image":"url("+this.get("photoUrl")+")"}),this.get("model").getValue("primaryNeedsInterstitial")&&e.addClass("restricted-image")):this.downloadCacheAndSetImage(),this},activate:function(){return this.renderInteractionView().then(function(e){this.fire("activated"),this.get("container").addClass("awake")}.bind(this)),this},downloadCacheAndSetImage:function(){e.fluid.loadImage(this.get("photoUrl"),{timeout:1e3,retry:!0}).then(function(e){this.handleImageLoad(!0,e)}.bind(this),function(e){this.handleImageLoad(!1,e+"?retry="+Date.now())}.bind(this))},handleImageLoad:function(t,i){var r;(r=this.get("container")).setStyle("backgroundImage","url("+i+")"),t||r.setStyle("backgroundColor","#eee"),this.get("model").getValue("primaryNeedsInterstitial")&&r.addClass("restricted-image"),e.fluid.chill(function(){this.fire(t?"loaded":"loadError")},this),r=null},updateGeometry:function(e){var t;e?this.set("layoutItem",e):e=this.get("layoutItem"),t=this.get("container"),this.updateNodeGeometry(e,t),t=null},updateNodeGeometry:function(t,i){YUI.Env.isServer?i.setStyles({transform:"translate("+t.geometry.left+"px, "+t.geometry.top+"px)","-webkit-transform":"translate("+t.geometry.left+"px, "+t.geometry.top+"px)","-ms-transform":"translate("+t.geometry.left+"px, "+t.geometry.top+"px)"}):e.fluid.setStylePrefixed("transform","translate("+t.geometry.left+"px, "+t.geometry.top+"px)",i),i.setStyles({width:t.geometry.width+"px",height:t.geometry.height+"px"})},renderInteractionView:function(){var t,i=this.get("interactionViewName"),r=this.get("interactionView");return i&&!r?this.appContext.getView(i,e.merge(this._params,{id:this.get("id"),container:this.get("interactionContainer"),model:this.get("model"),albumPageUrl:this.get("model").getValue("url"),isActiveViewAgnostic:this.get("isActiveViewAgnostic"),engagementModelName:this.get("engagementModelName")})).then(function(e){return this.set("interactionView",e),e.initialize()}.bind(this)):r?(r.get("container").inDoc()||((t=r.get("container")).addClass("interaction-view"),this.get("container").replaceChild(t,this.get("interactionContainer")),r.normalizedActivate()),e.Promise.resolve(r)):e.Promise.resolve(null)},destroyInteractionView:function(){var e=this.get("interactionView");e&&(e.destroy(),this.set("interactionView",null))}},{ATTRS:{id:{writeOnce:"initOnly",validator:function(e,i){return t.photoId(e)}},parentSignature:{writeOnce:"initOnly"},layoutItem:{validator:function(e,t){return"object"==typeof e&&e.hasOwnProperty("geometry")&&"object"==typeof e.geometry&&e.geometry.hasOwnProperty("width")&&e.geometry.hasOwnProperty("height")&&e.geometry.hasOwnProperty("top")&&e.geometry.hasOwnProperty("left")}},photoUrl:{value:"/images/spaceball.gif",getter:function(t,i){var r=this.get("model").getValue("primaryPhotoSizes"),n=this.get("layoutItem"),a=e.PhotoModelHelper.getSizeToFit(this.get("model").id,{width:n.geometry.width,height:n.geometry.height},{sizes:r,includeSquare:!0,cropToFit:!0});return a?a.src:""}},model:{value:null},parentContainer:{writeOnce:"initOnly"},measureAFT:{value:!1,validator:function(t,i){return e.AttributeHelpers.validateBoolean(t)}},placeHolderHTML:{value:'<div class="youcansleepwhenyouredead" />',validator:function(t,i){return e.AttributeHelpers.validateString(t)}},interactionViewName:{writeOnce:"initOnly",value:null,validator:function(t,i){return e.AttributeHelpers.validateString(t)}},engagementModelName:{writeOnce:"initOnly",value:null,validator:function(t,i){return e.AttributeHelpers.validateString(t)}},interactionView:{value:null},interactionContainer:{value:null,getter:function(e,t){return e||YUI.Env.isServer||(e=this.get("container").one(".interaction-view")),e}}}})},"@VERSION@",{requires:["flickr-view","hermes-template-photo-list-album","url-helper","attribute-helpers","photo-model-helper"],optionalRequires:["fluid","storage-helper"]});